@model IEnumerable<ApplicationUser>
@inject UserManager<ApplicationUser> UserManager;

@{
    ViewData["Title"] = @localizer["Users"];
    int nr = 0;
    var CourseId = ViewBag.TeacherId;
}
<div class="row">
    <br />
    <a asp-action="ListUsers" class="btn btn-success col-md-1 col-md-offset-1" asp-route-id="Authors">@localizer["Authors"]</a>
    <a asp-action="ListUsers" class="btn btn-success col-md-1 col-md-offset-1" asp-route-id="Reviewers">@localizer["Reviewers"] </a>
    <a asp-action="ListUsers" class="btn btn-success col-md-1 col-md-offset-1" asp-route-id="Secretaries"> @localizer["Secretaries"] </a>
    <a asp-action="ListUsers" class="btn btn-success col-md-1 col-md-offset-1" asp-route-id="Editorials"> @localizer["Editorials"] </a>

    <a asp-action="ListUsers" class="btn btn-success col-md-1 col-md-offset-1" asp-route-id="Admin">@localizer["Admin"]</a>
    <a asp-action="ListUsers" class="btn btn-success col-md-1 col-md-offset-1" asp-route-id="All">@localizer["All"]</a>

</div>
<div class="row">

</div>


<h2>@localizer["Users"]</h2>
<a asp-action="AddUser" asp-controller="Account" class="btn btn-primary">@localizer["Add New User"]</a>
<div class="container" style="margin-top:10px;">
    @*<div class="row">
        <div class="col-md-2"></div>
        <div class="col-md-8">
            <form method="post" id="frm">
                <select name="ddlCourseId" class="form-control"
                        asp-items="@(new SelectList(ViewBag.CourseList, "Id", "Name",CourseId))"
                        onchange='javascript: document.getElementById("frm").submit();'>
                    <option value="0">اختر المادة</option>
                </select>

            </form>
        </div>
        <div class="col-md-2"></div>

    </div>*@
</div>
@if (Model.Any())
{
    <table class="table table-responsive">
        <tr>
            <th> #</th>
            <th>@localizer["User Name"]</th>
            <th>@localizer["Name"]</th>
            <th>@localizer["Mobile"]</th>
            <th>@localizer["Active"]</th>


            <th></th>
        </tr>
        <tbody>
            @foreach (var user in Model)
            {
                if (await UserManager.IsInRoleAsync(user, "superAdmin") && !User.IsInRole("superAdmin"))
                {
                    continue;
                }
                nr++;
            <tr>
                <td>@nr</td>

                <td>@user.UserName</td>
                <td>@user.Name</td>
                <td>@user.Mobile</td>
                <th>
                    @if (user.EmailConfirmed)
                    {
                    <span class="text-success">@localizer["Yes"]</span>
                    }
                    else
                    {
                        {
                <span class="text-danger">@localizer["No"]</span>
                        }
                    }

                </th>



                <td>
                    <form method="post" asp-action="DeleteUser" asp-route-id="@user.Id">
                        <a asp-action="EditUser" asp-controller="Administration" asp-route-id="@user.Id" class="btn btn-success"><span class="glyphicon glyphicon-pencil"></span></a>
                        <span style="display:none" id="confirmDeleteSpan_@user.Id" onclick="ConfirmDelete('@user.Id',false)">
                            <span>@localizer["Confirm Delete"]</span>
                            <button type="submit" class="btn btn-danger">@localizer["Yes"]</button>
                            <a href="#" class="btn btn-primary">@localizer["No"]</a>
                        </span>
                        <span id="deleteSpan_@user.Id" onclick="ConfirmDelete('@user.Id',true)">
                            <a href="#" class="btn btn-danger"><span class="glyphicon glyphicon-trash"></span></a>
                        </span>
                    </form>
                </td>
            </tr>
            }
        </tbody>
    </table>
}
else
{
    <h3 class=" text-danger text-center">@localizer["No data"]</h3>
}
@section Scripts {
    @await Html.PartialAsync("_ValidationScriptsPartial")
    <script src="~/js/CustomScript.js"></script>
}
