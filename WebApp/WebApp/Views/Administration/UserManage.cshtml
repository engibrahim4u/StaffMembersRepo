@model UserManageDataVM
@{
    ViewData["Title"] = @localizer["Users"];
    int nr = 0;
    UserPager pager = new UserPager();
    int pageNum = 0;
    if (ViewBag.Pager != null)
    {
        pager = ViewBag.Pager;
        pageNum = pager.CurrentPage;
        nr = (pager.CurrentPage - 1) * pager.PageSize;
    }
}
<form action="UserManage" method="get">
    <div class="row">
        <div class="col-md-3">
            <div class="form-group">
                <label class="control-label">الصلاحية</label>

                <select asp-for="RoleName" class="form-control" asp-items="@(new SelectList(Model.Roles, "RoleName", "RoleNameAr"))">
                    <option selected="selected" value=""> الكل </option>
                </select>

            </div>
        </div>
        <div class="col-md-3">
            </div>
            <div class="col-md-3">
                <label class="control-label">التفعيل</label>

                <select asp-for="Active" class="form-control">
                    <option selected="selected" value=""> الكل </option>
                    <option value="Yes"> مفعل </option>
                    <option value="No"> غير مفعل</option>

                </select>
            </div>
        </div>
    <div class="row">
        <div class="col-md-3">
            <div class="form-group">
                <label class="control-label">البحث بالإسم</label>
                <input asp-for="Name" class="form-control font-16" placeholder="كلمة البحث" />
            </div>
        </div>
        <div class="col-md-3">
        </div>
        <div class="col-md-6">
            <label class="control-label"></label>

            <div class="form-group">
                <input type="submit" value="بحــــث" id="btnSearch" class="btn btn-success" />
                <a asp-action="AddUser" asp-controller="Account" class="btn btn-success">اضافة مستخدم</a>

            </div>
        </div>
    </div>
</form>


<h2>المستخدمين</h2>
<div class="container" style="margin-top:10px;">
   
</div>
@if (Model.Users.Any())
{
    <table class="table table-responsive">
        <tr class="bg-primary">
            <th> #</th>
            <th>الحالة</th>
            <th>الاسم</th>
            <th>الصلاحية</th>
            <th>البريد الالكتروني</th>
            <th>الجوال</th>
            <th></th>
        </tr>
        <tbody>
            @foreach (var user in Model.Users)
            {
               
                nr++;
            <tr >
                <td class="text-center">@nr</td>

                <td class="text-center">
                    @if (user.Active)
                    {
                        <span class="glyphicon glyphicon-ok"></span>
                        <span class="text-success">مفعل</span>
                    }
                    else
                    {
                        <span class="glyphicon glyphicon-remove"></span>

                        <span class="text-danger">غير مفعل</span>

                    }
                </td>
                <td>@user.Name</td>
                <td class="text-center">@user.RoleAr</td>
                <td class="text-center">@user.Email</td>
                <td class="text-center">@user.Mobile</td>

             



                <td>
                    <form method="post" asp-action="DeleteUser" asp-route-id="@user.UserId">
                        <a asp-action="EditUser" asp-controller="Administration" asp-route-id="@user.UserId" class="btn btn-success"><span class="glyphicon glyphicon-pencil"></span></a>
                        <span style="display:none" id="confirmDeleteSpan_@user.UserId" onclick="ConfirmDelete('@user.UserId',false)">
                            <span>@localizer["Confirm Delete"]</span>
                            <button type="submit" class="btn btn-danger">@localizer["Yes"]</button>
                            <a href="#" class="btn btn-primary">@localizer["No"]</a>
                        </span>
                        <span id="deleteSpan_@user.UserId" onclick="ConfirmDelete('@user.UserId',true)">
                            <a href="#" class="btn btn-danger"><span class="glyphicon glyphicon-trash"></span></a>
                        </span>
                    </form>
                </td>
            </tr>
            }
        </tbody>
    </table>
    <partial name="_UserPagerPartial" model="@pager" />
}
else
{
    <h3 class=" text-danger text-center">@localizer["No data"]</h3>
}
@section Scripts {
    @await Html.PartialAsync("_ValidationScriptsPartial")
    <script src="~/js/CustomScript.js"></script>
}
